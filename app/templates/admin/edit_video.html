{% extends "base.html" %}

{% block content %}
<div class="container">
  <h2 class="mb-4">‚úè –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ</h2>

  <form method="POST" enctype="multipart/form-data" class="card p-4 shadow-sm">
    {{ form.hidden_tag() }}

    <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ -->
    {% if form.errors %}
      <div class="alert alert-danger">
        <ul class="mb-0">
          {% for field, errors in form.errors.items() %}
            {% for error in errors %}
              <li>{{ error }}</li>
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
    <div class="mb-3">
      {{ form.title.label(class="form-label") }}
      {{ form.title(class="form-control", placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ") }}
    </div>

    <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
    <div class="mb-3">
      {{ form.description.label(class="form-label") }}
      {{ form.description(class="form-control", rows="4", placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ") }}
    </div>

    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
    <div class="mb-3">
      {{ form.category.label(class="form-label") }}
      {{ form.category(class="form-select") }}
    </div>

    <!-- –¢–µ–∫—É—â–µ–µ –ø—Ä–µ–≤—å—é -->
    {% if video.thumbnail %}
    <div class="mb-3">
      <label class="form-label">–¢–µ–∫—É—â–∞—è –æ–±–ª–æ–∂–∫–∞:</label><br>
      <img src="{{ url_for('static', filename='thumbnails/' ~ video.thumbnail) }}"
           alt="–ü—Ä–µ–≤—å—é" class="img-thumbnail mt-2" style="max-height: 150px;">
    </div>
    {% endif %}

    <!-- –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π thumbnail -->
    <div class="mb-3">
      {{ form.thumbnail.label(class="form-label") }}
      {{ form.thumbnail(class="form-control") }}
      <div class="form-text">–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—É—é –æ–±–ª–æ–∂–∫—É (—Å—Ç–∞—Ä–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–º–µ–Ω–∏—Ç—Å—è)</div>
    </div>

    <!-- –¢–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ -->
    <div class="mb-3">
      <label class="form-label">–¢–µ–∫—É—â–µ–µ –≤–∏–¥–µ–æ:</label><br>
      <video controls style="max-width: 100%; max-height: 300px;" class="mt-2">
        <source src="{{ url_for('main.uploaded_file', filename=video.filename) }}" type="video/mp4">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
      </video>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ -->
    <div class="mb-3">
      {{ form.video.label(class="form-label") }}
      {{ form.video(class="form-control") }}
      <div class="form-text">–ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π –≤–∏–¥–µ–æ—Ñ–∞–π–ª (—Å—Ç–∞—Ä—ã–π –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)</div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ -->
    <div class="d-flex justify-content-between mt-4">
      <a href="{{ url_for('main.admin_videos') }}" class="btn btn-secondary">‚¨Ö –ù–∞–∑–∞–¥</a>
      <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
    </div>
  </form>
</div>
{% endblock %}
