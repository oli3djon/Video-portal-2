{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>üé¨ –í–∏–¥–µ–æ</h2>

    {% if pagination.items %}
    <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for video in pagination.items %}
        <div class="col">
            <div class="card h-100 shadow-sm">
                <!-- –û–±–ª–æ–∂–∫–∞ -->
                {% if video.thumbnail %}
                    <img src="{{ url_for('static', filename='thumbnails/' ~ video.thumbnail) }}"
                         class="card-img-top" alt="{{ video.title }}">
                {% else %}
                    <img src="{{ url_for('static', filename='default-thumbnail.jpg') }}"
                         class="card-img-top" alt="–ù–µ—Ç –æ–±–ª–æ–∂–∫–∏">
                {% endif %}

                <div class="card-body">
                    <h5 class="card-title">{{ video.title }}</h5>
                    <p class="card-text text-muted">
                        {{ video.category.name if video.category else "–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" }}
                    </p>
                    <p class="card-text small">
                        –ê–≤—Ç–æ—Ä: {{ video.user.username if video.user else "‚Äî" }}<br>
                        –ó–∞–≥—Ä—É–∂–µ–Ω–æ: {{ video.created_at.strftime('%Y-%m-%d') }}
                    </p>
                </div>
                <div class="card-footer text-center">
                    <a href="{{ url_for('main.view_video', video_id=video.id) }}" class="btn btn-primary">
                        ‚ñ∂ –°–º–æ—Ç—Ä–µ—Ç—å
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    <nav class="mt-4" aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if pagination.has_prev %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('main.videos', page=pagination.prev_num) }}">–ù–∞–∑–∞–¥</a>
                </li>
            {% endif %}

            {% for page_num in pagination.iter_pages() %}
                {% if page_num %}
                    <li class="page-item {% if page_num == pagination.page %}active{% endif %}">
                        <a class="page-link" href="{{ url_for('main.videos', page=page_num) }}">{{ page_num }}</a>
                    </li>
                {% else %}
                    <li class="page-item disabled"><span class="page-link">‚Ä¶</span></li>
                {% endif %}
            {% endfor %}

            {% if pagination.has_next %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('main.videos', page=pagination.next_num) }}">–í–ø–µ—Ä—ë–¥</a>
                </li>
            {% endif %}
        </ul>
    </nav>
    {% else %}
        <p>–í–∏–¥–µ–æ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    {% endif %}
</div>
{% endblock %}
